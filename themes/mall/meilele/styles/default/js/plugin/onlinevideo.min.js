$.onlineVideo=function(b,a){new $.onlineVideo.prototype.init(b,a);};$.onlineVideo.prototype={constructor:$.onlineVideo,bg:"http://web/images/zhuanti/upload/online_video_icon_1394185346.png",styleInserted:false,init:function(b,a){if($._currentOnlineVideoBox){$._currentOnlineVideoBox.remove();
}this.setting=$.extend({autoClose:true,defaultCityId:parseInt($.cookie("region_id"))},a);if(b==false&&this.setting.exprInfo&&this.setting.exprInfo.exprList&&this.setting.exprInfo.exprList.length==1){b=this.setting.exprInfo.exprList[0].exprId;
delete this.setting.exprInfo;}this.exprId=b;this.dom=this.show();$._currentOnlineVideoBox=this;if(!this.exprId&&this.setting.exprInfo){this.insertExprSelect();
}else{if(!this.exprId&&!this.setting.exprInfo){this.insertCitySelect();}}this.msgBox=$("#_JS_online_video_box_");this.btn=$("#_JS_online_video_btn_");this.title=$("#JS_online_video_title");
this.body=$("#JS_online_video_body");if(parseInt(b)){this.send();return true;}},setStyleRule:function(){if(!this.styleInserted){var a=[];var b;a.push(".ov_box {width:440px;padding-bottom:20px;border:5px solid #aaa;border-color:rgba(170,170,170,.8);background:#fff;margin:0px auto;overflow:hidden;}");
a.push(".ov_content {padding-top:19px;}");a.push(".ov_box .qq_icon{display:inline-block;width:15px;height: 16px;background:#f1f1f1 url("+this.bg+") -66px 0;}");
a.push(".ov_input {width:205px;height:28px;border:1px solid #c1c1c1;padding:0;margin:0;color:#555;padding-left:5px;line-height:28px;}");a.push(".ov_captcha {width:34px;height:28px;border:1px solid #c7c7c7;padding:0;margin:0;vertical-align:top;color:#555;padding-left:5px;line-height:28px;}");
a.push(".ov_content label {height:28px; line-height: 28px;width:150px;text-align:right;display:inline-block;vertical-align:top;}");if(this.exprId){a.push(".ov_content label{width:120px;}");
}a.push(".ov_submit { display:inline-block;height:27px;background:#fff url("+this.bg+") 0px  0px;width:65px;color:#fff;text-align:center;border:none;margin:0;padding:0;font-weight:bold;}");
a.push("._selectbox{display:inline-block;padding-top:4px;border:1px solid #ddd;height:24px;margin-bottom:8px;padding-right:5px;*border:none;}");a.push("._ov_select{border:none;margin:0;margin-bottom:10px;width:207px;}");
a.push("#_JS_ov_city_list_,#_JS_ov_province_list_{width:95px;}");a.push("._check_icon{display:inline-block;height:16px;width:15px;margin-top:9px;}");a.push(".ov_content .twoDimensionCodeStage{width:367px;border-top: dotted 1px #e1e1e1;margin:10px auto 0 auto;padding-top:15px;}");
a.push(".ov_content .twoDimensionCodeStage .twoDimensionCode {width:193px;height:66px;background: url("+$.__IMG+"/images/common/bg4.png?2) 0 0 no-repeat;padding:8px 11px;margin:0 auto;}");
a.push(".ov_content .twoDimensionCodeStage .img img { background: url("+$.__IMG+"/images/common/bg4.png?2) 0 -82px no-repeat;}");a.push(".ov_content .twoDimensionCodeStage .sideDesc {padding-top: 10px;width: 127px;height: 56px;background: #f6f6f6;text-align:center;}");
a.push('.ov_content .twoDimensionCodeStage .sideDesc a{font:12px/21px "宋体";color:#444;}');a.push(".ov_content .exprOnlineVideo {float:left; width: 90px; height: 82px; margin-left: 10px; background: url("+$.__IMG+"/images/common/bg4.png?1) -60px -82px no-repeat;}");
a.push(".ov_content .twoDimensionCodeStage.hasExprVideo .twoDimensionCode {float: left; margin-left: 20px;}");$.insertStyle(a.join(""));this.styleInserted=true;
}},show:function(){this.setStyleRule();var a="";a+='<div class="ov_box" style="">';a+='<div class="clearfix" style="height:20px;line-height:20px;padding: 10px 0;border-bottom:1px solid #dedede;padding-left:32px;color:#333;background:#f1f1f1 url('+this.bg+') -56px -62px no-repeat;overflow:hidden;"><div id="JS_online_video_title" class="Left" style="font-size:16px;font-family:微软雅黑;">体验馆在线视频</div><div class="Right" style="padding-right:10px;"><a style="font-size:18px;color:#909090;font-weight:bold;" href="javascript:;" onclick="$.closeLightBox(\'{=id}\');">&times;</a></div></div>';
a+='<div id="JS_online_video_body" class="ov_content" style="">';a+='<div id="_JS_ov_city_select_"></div>';a+='<div id="_JS_ov_expr_select_"></div>';a+='<div style="color:#454545;padding:10px 20px 0 20px;text-align:center" id="_JS_online_video_box_"></div>';
a+='<div style="margin-top:10px;"><label></label><a href="javascript:void(0);" id="_JS_online_video_btn_" onclick="$._currentOnlineVideoBox.send();return false;" style="" class="pointer ov_submit" target="_blank"></a></div>';
a+='<div class="twoDimensionCodeStage clearfix" id="JS_twoDimensionCodeStage">';a+='<div class="twoDimensionCode">';a+='<div class="img Left">';a+='<a href="http://web/discuss/item-353383/?from=wxzd" target="_blank">';
a+='<img src="'+$.__IMG+'/themes/paipai/images/blank.gif" height="66" width="66" />';a+="</a>";a+="</div>";a+='<div class="sideDesc Right">';a+='<a href="http://web/discuss/item-353383/?from=wxzd" target="_blank">扫一扫获取导航路线</br>200元现金券20元拍</a>';
a+="</div>";a+="</div>";a+="</div>";a+="</div>";a+="</div>";a+="";return $.lightBox(a,{},true);},showVideo:function(){var b=this.exprVideoData;this.title.html('<span style="display:inline-block;width: 18px; height: 18px; vertical-align: middle; margin-right: 10px; background: url('+this.bg+') no-repeat -65px -76px;"></span>美乐乐体验馆视频<a href="http://wpa.qq.com/msgrd?v=3&uin='+b.qq+'&site=qq&menu=yes" target="_blank" onclick="$._currentOnlineVideoBox.qqService();return true;" style="display:inline-block;width: 142px; height: 35px; vertical-align: middle; margin-left: 10px; background: url('+this.bg+') no-repeat 0 -106px;" title="观看更多产品细节，专业顾问将为您服务"></a>').parent().css({height:"36px",background:"#f1f1f1","padding-left":"18px"});
this.body.css({height:"524px",padding:0}).html('<embed width="860" height="524" wmode="opaque" type="application/x-shockwave-flash" src="'+b.video+'" allowscriptaccess="sameDomain" allowfullscreen="true">');
var a=window.pageY||document.documentElement.scrollTop||document.body.scrollTop||0;$(this.dom).find(".ov_box").css({width:"860px",padding:0}).end().css({position:"absolute",width:"870px",top:(a+50)+"px",left:"50%","margin-left":"-435px"});
},insertExprSelect:function(){str="";str+='<div><label><span class="red">'+this.setting.exprInfo.cityName+'</span>现有<span class="red">'+this.setting.exprInfo.exprList.length+'</span>家体验馆：</label><span class="_selectbox"><select class="_ov_select" onchange="$._currentOnlineVideoBox.exprId=this.value;">';
str+='<option value="0">请选择附近体验馆</option>';for(var a=0;a<this.setting.exprInfo.exprList.length;a++){var b="";if(this.setting.exprInfo.exprList.length==1||this.setting.defaultExprId==this.setting.exprInfo.exprList[a].exprId){b=' selected="selected"';
this.exprId=this.setting.exprInfo.exprList[a].exprId;}str+="<option"+b+' value="'+this.setting.exprInfo.exprList[a].exprId+'">'+this.setting.exprInfo.exprList[a].exprName+"</option>";
}str+="</select></span></div>";$("#_JS_ov_expr_select_").html(str);},insertCitySelect:function(){var e=this;var b=this.cityInfo;if(b){var d="";d+="<div>";
d+="<label>请选择您所在城市：</label>";d+='<span class="_selectbox"><select class="_ov_select" id="_JS_ov_province_list_" onchange="$._currentOnlineVideoBox.provinceSelected(this.value);">';
d+='<option value="0">请选择省</option>';for(var a in b){var f="";if(this.setting.defaultCityId&&b[a]&&b[a].cityList&&b[a].cityList[this.setting.defaultCityId]){f=' selected="selected"';
var c=a;}d+='<option value="'+a+'"'+f+">"+b[a].provinceName+"</option>";}d+="</select></span>";d+='<span class="_selectbox" style="margin-left:12px;"><select class="_ov_select" id="_JS_ov_city_list_" onchange="$._currentOnlineVideoBox.citySelected(this.value,this.options[this.selectedIndex].innerHTML);"><option value="0">请选择市</option></select></span>';
d+="</div>";$("#_JS_ov_city_select_").html(d);if(c){this.provinceSelected(c);}}else{this.lock=true;$("#_JS_ov_city_select_").html('<div style="padding-bottom:20px;text-align:center;color:#999">正在获取数据，请稍候...</div>');
this.cityInfo={"12":{provinceName:"\u6d59\u6c5f",cityList:{"124":{cityName:"\u676d\u5dde",exprList:{"8":"\u676d\u5dde\u897f\u6e56\u533a\u4f53\u9a8c\u9986","105":"\u676d\u5dde\u4e0b\u57ce\u533a\u4f53\u9a8c\u9986","194":"\u676d\u5dde\u8427\u5c71\u533a\u4f53\u9a8c\u9986","260":"\u5bcc\u9633\u4f53\u9a8c\u9986","262":"\u676d\u5dde\u6ee8\u6c5f\u533a\u4f53\u9a8c\u9986","277":"\u4e34\u5b89\u4f53\u9a8c\u9986","278":"\u6850\u5e90\u4f53\u9a8c\u9986"}}}}};
this.insertCitySelect();this.lock=false;return;}},provinceSelected:function(e){if(!parseInt(e)){return;}var b='<option value="0">请选择市</option>';for(var a in this.cityInfo[e].cityList){var d="";
if(this.setting.defaultCityId&&a==this.setting.defaultCityId){d=' selected="selected"';var c=[a,this.cityInfo[e].cityList[a].cityName];}b+='<option value="'+a+'"'+d+">"+this.cityInfo[e].cityList[a].cityName+"</option>";
}$("#_JS_ov_city_list_").html(b);this.selectedProvinceId=e;if(c){this.citySelected.apply(this,c);}},citySelected:function(d,b){if(!parseInt(d)){return;
}var c=[];for(var a in this.cityInfo[this.selectedProvinceId].cityList[d].exprList){c.push({exprName:this.cityInfo[this.selectedProvinceId].cityList[d].exprList[a],exprId:a});
}this.setting.exprInfo={cityName:b,exprList:c};this.selectedCityId=d;this.insertExprSelect();},remove:function(){if($._currentOnlineVideoBox&&$._currentOnlineVideoBox.dom){$($._currentOnlineVideoBox.dom).remove();
delete ($._currentOnlineVideoBox);}},send:function(){if(this.lock){return;}if(!parseInt(this.exprId)){$._currentOnlineVideoBox.msg("请选择离您最近的体验馆。");return;
}$._currentOnlineVideoBox.msg("正在获取体验馆数据，请稍后。。。");var a={8:{qq:"597240422",video:"http://player.youku.com/player.php/sid/XNjk2NDc0OTg0/v.swf"},278:{qq:"2873644327",video:"http://player.youku.com/player.php/sid/XNjkyNDYyOTYw/v.swf"},194:{qq:"482657520",video:"http://player.youku.com/player.php/sid/XNjk1NTgxMjI0/v.swf"},105:{qq:"1953794352",video:"http://player.youku.com/player.php/sid/XNjkyMzA3ODg4/v.swf"},262:{qq:"2716584729",video:"http://player.youku.com/player.php/sid/XNjk2NDIyNTg0/v.swf"},277:{qq:"2845998825",video:"http://player.youku.com/player.php/sid/XNjkyNjQ4OTk2/v.swf"},260:{qq:"2413378532",video:"http://player.youku.com/player.php/sid/XNjkzNzEyODA0/v.swf"}};
if(a[this.exprId]){$._currentOnlineVideoBox.msg("获取数据成功，点击[确定]跳转到["+a[this.exprId]+"]QQ聊天页面",true);this.exprVideoData=a[this.exprId];this.showVideo();}else{$._currentOnlineVideoBox.msg("抱歉，该体验馆未找到在线视频数据");
$._currentOnlineVideoBox.btn.attr("href","javascript:void(0);");}window._gaq=window._gaq||[];_gaq.push(["_trackEvent","video","video_click",this.exprId+"_"+($._currentOnlineVideoBox.setting.click?$._currentOnlineVideoBox.setting.click:"")+location.href]);
},msg:function(b,c){var a=c?"-42":"-27";b='<span style="display:inline-block;vertical-align:middle;width:14px;height:14px;background:url('+this.bg+") "+a+'px -65px;margin-right:6px;"></span><span style="vertical-align:middle;color:#f24443;">'+b+"</span>";
$._currentOnlineVideoBox.msgBox.html(b);},qqService:function(){_gaq.push(["_trackEvent","video","qq_click",this.exprId+"_"+($._currentOnlineVideoBox.setting.click?$._currentOnlineVideoBox.setting.click:"")+location.href]);
return true;}};$.onlineVideo.prototype.init.prototype=$.onlineVideo.prototype;
/*TDG:2014-04-10 16:54:50*/