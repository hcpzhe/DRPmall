/*20140618#leihao*/var MAIN_DOMAIN="/",CG=CG||{};var SLIDE=function(h,a,j,b,i,g,c,d,f){var e=this;if(!h){return false;}this.name=c;this.now=1;this.lock=0;this.stage=h;this.nav=a;this.stageId=j;this.navId=b;this.height=i;this.count=g;if(!g){return;}this.hoverDom=f;this.hoverDom.mouseover(function(){e.lock=1;}).onmouseout(function(){e.lock=0;});this.li=this.nav.find("a");this.li.mouseover(function(){var k=e.li.index(this);e.scrol(k+1);e.lock=1;});setInterval(function(){if(!e.lock){e.scrol();}},d);};SLIDE.prototype.scrol=function(e){var c=this;e=e||(c.now)%c.count+1;if(e==c.now){return;}var a=$("#JS_slide_img_"+e);var d=a.attr("data-src2");if(d){a.attr("src")=d;}if(this.nav){var b=$("#"+c.navId+e);this.li.removeClass("current");b.addClass("current");}this.stage.stop(true).animate({marginTop:((1-e)*c.height)+"px"});c.now=e;};window.myfocus=new SLIDE($("#JS_slide_stage"),$("#JS_slide_nav"),"JS_slide_stage_","JS_slide_nav_",249,$("#JS_slide_nav a").length,"myfocus",5000,$("#JS_slide_nav a"));var _currentRankId=0;function setRankCurrent(b){if(!b){b=0;}if(b==_currentRankId){return;}var g=$("#JS_left_rank_"+b);var c=$("#JS_left_rank_"+_currentRankId);if(g&&c){var k=g.find("span").eq(1);var e=c.find("span").eq(1);if(k&&e){var j=k.find("a").eq(0);var f=e.find("a").eq(0);if(j&&f){var i=j.attr("title");var h=f.attr("title");if(i.length>14){j.html(i.slice(0,12)+"...");}else{j.html(i);}if(h.length<10){f.html(h);}else{f.html(h.slice(0,8)+"...");}k.width(168);e.css("width","auto");}}g.addClass("current");c.removeClass("current");_currentRankId=b;}}function toggleCatgory1(c){var g=$("#JS_category_body_"+c);var j=$("#JS_category_icon2_"+c);var h=$("#JS_category_title_"+c);var d=$("#JS_category_body_"+_currentCat);var i=$("#JS_category_icon2_"+_currentCat);var e=$("#JS_category_title_"+_currentCat);if(g&&j){if(_currentCat==c){i.html("+");d.addClass("none");_currentCat=-1;}else{var f=g.find("b");var k=g.find("dd");g.removeClass("none");j.html("-");if(_currentCat!="-1"&&d&&i){d.addClass("none");i.html("+");}_currentCat=c;}}}function toggleCatgory2(e){e=$(e);if(e.length){var a=e;var c=e.parent().parent().find("dd").eq(0);if(a.prop("nodeName")!="B"){a=e.find("b").eq(0);c=e.parent().find("dd").eq(0);}}if(a.length){if(a.hasClass("current")){a.html("+");a.removeClass("current");c.addClass("none");return false;}else{a.html("&minus;");a.addClass("current");c.removeClass("none");}}}function goodAddToCat(c,b){c=c||null;if(c==null){return;}_gaq.push(["_trackEvent","categoryEvent","addToCart",b]);var a={};a[c]="1";$.addToCart(c,a,null,{is_logistics:"1"});}function goodCollect(a){a=a||null;if(a==null){return;}$.ajax({url:"/ajax_user/?act=collect&id="+a,dataType:"json",cache:false,success:function(b){if(b.error==2){$.cookie("web_login","0");$.showLoginBox(function(){goodCollect(a);});}else{$.alert(b.message);}},error:function(){$.alert("由于网络原因，收藏失败，请稍后再试。");}});}function getLocalData(a){var b="";if(a){b=$.cookie(a)||"";}return b;}function saveLocalData(a,b){if($.type(a)=="object"){$.each(a,function(c){saveLocalData(c,a[c]);});}else{if($.type(a)=="array"){saveLocalData("stockArea",a.join(","));}else{if(a&&b){$.cookie(a,b);}}}}function CategoryInit(){CategoryInit2();var e=[["pro","stockProvinceId"],["city","stockCityId"],["dis","stockDisId"]];var b=getLocalData("stockArea");var c=[];if(b){c=b.split(",");}$.each(e,function(k){var j=e[k][0];var n=$("#JS_stock_"+j+"_select");var l=$("#JS_stock_"+j+"_selectbox");var m=$("#JS_selected_"+j+"_name");l.on("click.CG","a",function(){var q=$(this);var p=q.data("region_id");var o=q.text();n.nextAll(".stock").addClass("none");g(p,o,k);});n.on("click.CG",function(){var q=$(this);var p=q.data("init");var o=m.data("parent_id");q.addClass("current").siblings(".stock").removeClass("current");if(o&&!p){g(o,"",k-1);}else{l.removeClass("none").siblings(".selectbox").addClass("none");}});});function g(r,j,p){var q=e[p];j&&$("#JS_selected_"+q[0]+"_name").html(j);c[p]=r;if(p==e.length-1){saveLocalData(c);}if(r==0){i(0);return false;}else{if(r==2){g(35,"北京",1);return false;}else{if(r==10){g(110,"上海",1);return false;}else{if(r==3){g(36,"天津",1);return false;}else{if(r==23){g(271,"重庆",1);return false;}}}}}if(p==2){i(r);}else{var n=p+1;var l=e[n];var m=$("#JS_selected_"+l[0]+"_name");var k=$("#JS_stock_"+l[0]+"_select");var o=$("#JS_stock_"+l[0]+"_selectbox");$.ajax({url:MAIN_DOMAIN+'ajax_ajax/?act=data_center&module=common&method=getRegionByParentId&param={"parent_id":'+r+"}",dataType:"json",success:function(t){if(t&&t.error==0&&t.region_list&&t.region_list.length>0){j&&m.html("请选择");var u="";for(var s in t.region_list){u+='<a href="javascript:void(0);" data-region_id="'+t.region_list[s].region_id+'">'+$.trim(t.region_list[s].region_name)+"</a>";}k.data("init",1).removeClass("none").addClass("current").siblings(".stock").removeClass("current");o.html(u).removeClass("none").siblings(".selectbox").addClass("none");$("#JS_new_pro_select").show();}else{i(r);}}});}}function i(k){var j="";if(_basic_url&&k){j=_basic_url.replace(/xxxx/,k);}if(j){location.href=j;}return false;}var f=$("#JS_active_select_b"),d=$("#JS_acitve_selectbox_b");function a(){f.addClass("current");d.removeClass("none");}function h(){f.removeClass("current");d.addClass("none");}f.mouseover(a).mouseout(h);d.mouseover(a).mouseout(h);new TabMouseover("JS_fixture_recom","fixture_commune",1,_fixture_url);new TabMouseover("JS_fixture_article","fixture_knowledge",0,_fixture_bbs);$.lazyImg.start("both",{attributeTag:window.isWideScreen?["data-wide-src","data-src"]:"data-src"});}function TabMouseover(f,g,d,c){var a=$("#"+f+" .fixture_title");var b=$("."+g);var e=$("#"+f+" a");a.mouseover(function(){var i=a.index(this);for(var h=0;h<a.length;h++){if(a[h].innerHTML.length>3&&d==1){a[h].innerHTML=a[h].innerHTML.slice(2);}a[h].className="fixture_title Left";b[h].className=g+" none";}if(d==1){a[i].innerHTML="推荐"+a[i].innerHTML;}a[i].className="fixture_title Left current";b[i].className=g;if(c){e[0].href=c[i];}});}function CategoryInit2(){var a=$("#JS_fliterTable");if(a.length<0){return;}var c=a.find("dl");c.eq(_fliterShowNum).nextAll().addBack().hide();var d=function(){c.each(function(l){var o=c.eq(l);var j=o.attr("is-brand");var n=o.find("table");var k=o.find(".more");var m=n.height();if(!j&&m>23){k.css({display:"inline-block"}).addClass("JS_more");}});};d();function b(){var h=c.find(".JS_more");if(h.length<=0){return;}h.click(function(){var i=i=$(this).parents(".lists");if($(this).attr("is-open")=="true"){i.removeClass("auto");$(this).removeAttr("is-open",false).html("更多<em></em>").removeClass("open").addClass("close");}else{i.addClass("auto");$(this).attr("is-open",true).html("收起<em></em>").removeClass("close").addClass("open");}});}b();function g(){var j=$("#JS_brand_overflow"),k=$("#JS_brand_more"),l=j.attr("data-total"),i=j.attr("data-line"),h=0;if(i>2){k.css({display:"inline-block"});k.click(function(){if(i>4){h=209+"px";j.css({height:h,"overflow-y":"auto"});}else{if(i==3){h=157+"px";j.css({height:h});}else{if(i==4){h=209+"px";j.css({height:h});}}}if($(this).attr("data-state")==1){$(this).removeAttr("data-state",0).html("更多<em></em>").removeClass("open").addClass("close");j.css({height:"105px",overflow:"hidden"});j.scrollTop(0);}else{$(this).attr("data-state",1).html("收起<em></em>").removeClass("close").addClass("open");}});}j.find("li").hover(function(){$(this).addClass("hover");},function(){$(this).removeClass("hover");});}g();if(c.length){if(_fliterShowNum>_fliterShowCount){_fliterShowNum=_fliterShowCount;}var e=$("#JS_exp_fliter");var f=$("#JS_exp_fliter_text");e.click(function(){moreDom=[];var h=$(this);if(h.is(".nav_box_show")){h.removeClass("nav_box_show");f.html(f.data("show-text")||"更多选项");c.eq(_fliterShowNum).nextAll().addBack().hide();}else{h.addClass("nav_box_show");f.html(f.data("close-text")||"收起");c.show();d();b();}});}}var priceDom=$("#JS_filter_price_btn"),priceMax=$("#JS_filter_price_max"),priceMin=$("#JS_filter_price_min");if(priceDom.length&&priceMax.length&&priceMin.length){function priceDiy(){var a=parseInt(priceMax.val()),d=parseInt(priceMin.val()),b,c=CG.priceUrl;if(a>0&&d>0&&c){if(a<d){b=d;d=a;a=b;}c=c.replace("max0","max"+a);c=c.replace("min0","min"+d);window.location.href=c;}return false;}priceDom.click(priceDiy);priceMax.keyup(function(a){if(a.keyCode==13){priceDiy();}});priceMin.keyup(function(a){if(a.keyCode==13){priceDiy();}});}var recommonDataHandler=function(e){var a=e.length;var d=0;var c="";var b;var g=$("#JS_recommend_box");var f=$("#JS_recommend_content");for(;d<a;d++){b=e[d];if(!b.goods_name){continue;}c+='<div class="list clearfix';if(d==a-1){c+=" last";}c+='"><div class="Left"><a href="';c+=b.url;c+='" title="';c+=b.goods_name;c+='" target="_blank"><img width="96" height="64" src="';c+=$.__IMG+"/"+b.goods_thumb_1;c+='" /></a></div><div class="Right"><a href="';c+=b.url;c+='" title="';c+=b.goods_name;c+='" target="_blank">';c+=b.goods_name.substring(0,14);c+='</a><br /><span class="gray">销量：</span><span class="orange">';c+=b.total_sold_count;c+='</span><br /><span class="gray">'+b.price_tag+'：</span><span class="red yen">&yen;';c+=b.effect_price;c+="</span></div></div>";}f.html(c);g.removeClass("none");};$(document).ready(CategoryInit);